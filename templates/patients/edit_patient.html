{% extends 'base.html' %}

{% block title %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ü–∏–µ–Ω—Ç–∞ - –°—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –∫–ª–∏–Ω–∏–∫–∞{% endblock %}

{% block nav_patients %}active{% endblock %}

{% block page_header %}
    <!-- Page Header -->
    <div class="patients-header-combined">
        <div class="header-top">
            <div class="patients-count">
                ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ü–∏–µ–Ω—Ç–∞
            </div>
            <div class="patients-count" style="font-size: var(--font-size-base);">
                üë§ {{ patient.full_name }}
            </div>
        </div>
    </div>
{% endblock %}

{% block content %}
    <div class="card">
        <div class="card-body">
                {% if form.errors %}
                    <div class="alert alert-danger">
                        <strong>‚ùå –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏—Å–ø—Ä–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –æ—à–∏–±–∫–∏:</strong>
                        <ul class="mb-0">
                            {% for field, errors in form.errors.items %}
                                {% for error in errors %}
                                    <li>{{ field }}: {{ error }}</li>
                                {% endfor %}
                            {% endfor %}
                        </ul>
                    </div>
                {% endif %}
            
            <!-- Patient Form -->
            <form method="post">
                {% csrf_token %}
                
                <!-- Medical Information Section -->
                <div class="form-section-wrapper">
                    <div class="form-section-title">
                        üìã –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
                    </div>
                    <div class="form-group">
                        <label for="{{ form.history_of_illness.id_for_label }}" class="form-label">
                            –ù–æ–º–µ—Ä –∏—Å—Ç–æ—Ä–∏–∏ –±–æ–ª–µ–∑–Ω–∏ <span class="required">*</span>
                        </label>
                        {{ form.history_of_illness }}
                        <div class="help-text">
                            üí° –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –∏—Å—Ç–æ—Ä–∏–∏ –±–æ–ª–µ–∑–Ω–∏ (–º–∞–∫—Å–∏–º—É–º 10 —Å–∏–º–≤–æ–ª–æ–≤)
                        </div>
                    </div>
                </div>

                <!-- Personal Information Section -->
                <div class="form-section-wrapper">
                    <div class="form-section-title">
                        üë§ –õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="{{ form.first_name.id_for_label }}" class="form-label">
                                –ò–º—è <span class="required">*</span>
                            </label>
                            {{ form.first_name }}
                        </div>
                        
                        <div class="form-group">
                            <label for="{{ form.last_name.id_for_label }}" class="form-label">
                                –§–∞–º–∏–ª–∏—è <span class="required">*</span>
                            </label>
                            {{ form.last_name }}
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="{{ form.patronymic.id_for_label }}" class="form-label">
                                –û—Ç—á–µ—Å—Ç–≤–æ
                            </label>
                            {{ form.patronymic }}
                        </div>
                        
                        <div class="form-group">
                            <label for="{{ form.date_of_birth.id_for_label }}" class="form-label">
                                –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è <span class="required">*</span>
                            </label>
                            {{ form.date_of_birth }}
                            <div class="help-text">
                                üìÖ –§–æ—Ä–º–∞—Ç: –î–î.–ú–ú.–ì–ì–ì–ì
                            </div>
                        </div>
                    </div>
                </div>

                
                <!-- Form Actions -->
                <div class="d-flex gap-2 justify-content-end mt-4">
                    <button type="submit" class="btn btn-success">
                        ‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
                    </button>
                    <a href="/patients/" class="btn btn-secondary">
                        ‚ùå –û—Ç–º–µ–Ω–∞
                    </a>
                </div>
            </form>
        </div>
    </div>
{% endblock %}